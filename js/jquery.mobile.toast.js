;(function($,window,document,undefined){"use strict";$.widget("mobile.toast",{version:"0.0.7",options:{message:"",duration:2000,position:80,classOnOpen:"",classOnClose:"",beforeposition:null,beforeclose:null,afterclose:null,afteropen:null},_create:function(){this._parseOptions();this.$p=$.mobile.activePage;this.$c=$(".ui-content",this.$p);this.$toast=this._renderToast();this._addToPage();this.reposition();this.open();},_parseOptions:function(){this.options.duration=this._parseDurationOption(this.options.duration);this.options.position=this._parsePositionOption(this.options.position);},_parseDurationOption:function(value){if(typeof value==="string"){switch(value){case"short":value=2500;break;case"long":value=3500;break;default:value=2000;break;}}return value;},_parsePositionOption:function(value){if(typeof value==="string"){switch(value){case"top":value=20;break;case"center":value=50;break;case"bottom":value=80;break;default:value=80;break;}}return value;},_renderText:function(){return $("<p>"+this.options.message+"</p>").css({"max-width":"160px","margin":"0","padding":"6px 12px","font-size":"16px","color":"#FFFFFF","text-shadow":"none","border":"none"});},_renderToast:function(){return $("<div data-role='toast'></div>").html(this._renderText()).css({"display":"none","position":"fixed","z-index":"900000000","background-color":"#34495e","-webkit-border-radius":"6px","border-radius":"6px","background-clip":"padding-box"}).addClass(this.options.classOnOpen);},_addToPage:function(){this.$c.append(this.$toast);},_getToastCoordinates:function(){var toastDimensions={width:this.$toast.width(),height:this.$toast.height()},windowCoordinates=this._getWindowCoordinates();return{top:(windowCoordinates.height*this.options.position)/100,left:(windowCoordinates.width/2)-(toastDimensions.width/2)};},_getWindowCoordinates:function(){return{x:$.mobile.window.scrollLeft(),y:$.mobile.window.scrollTop(),width:(window.innerWidth||$.mobile.window.width()),height:(window.innerHeight||$.mobile.window.height())};},_destroy:function(){this.$toast.remove();this.$p=null;this.$c=null;this.$toast=null;window.clearTimeout(this.timer);this.timer=null;},_setOptions:function(){this._superApply(arguments);},_setOption:function(key,value){if(key==="message"){value=$.trim(value);if(value===""){return;}}if(key==="duration"){value=this._parseDurationOption(value);}if(key==="position"){value=this._parsePositionOption(value);}this._super(key,value);},_beforeEnd:function(){this._trigger("beforeClose");if(this.options.classOnClose!==""){this.$toast.addClass(this.options.classOnClose).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",$.proxy(function(){this._end();},this));}else{this.$toast.fadeOut(500,$.proxy(this._end,this));}},_end:function(){this.destroy();this._trigger("afterclose");},reposition:function(){this._trigger("beforeposition");var coordinates=this._getToastCoordinates();this.$toast.css({"top":coordinates.top,"left":coordinates.left});},open:function(){this.$toast.css({"display":"inline-block"});this._trigger("afteropen");this.timer=window.setTimeout($.proxy(this._beforeEnd,this),this.options.duration);}});})(jQuery,window,document);